name: Actions Workflow

on: [push]

jobs:
  run-github-actions:
    runs-on: ubuntu-latest
    steps:
      - name: checkout repo
        uses: actions/checkout@v2
      - name: Present Working Directory
        run: |
            pwd
            ls -a
            echo $GITHUB_SHA
            echo $GITHUB_REPOSITORY
            echo $GITHUB_WORKSPACE
            echo "${{ github.token }}"
      # - name: Checkout
      #   uses: actions/checkout@v1
      # - name: After Checkout
      #   run: |
      #       pwd
      #       ls -a
      #       cd yaml
      #       ls -a
      # - name: Simple JS Action
      #   id: greet
      #   uses: actions/hello-world-javascript-action@main
      #   with:
      #      who-to-greet: John
      # - name: Log Greeting Time
      #   run: echo "${{ steps.greet.outputs.time }}}"
      - name: Set the Output Context
        id: "OutputContext"
        run: |
            echo "contextDataPath=abi_coverity_output_context.json" >> $GITHUB_OUTPUT
        shell: bash
      
      # - name: "Sleep"
      #   shell: bash
      #   run: |
      #      sleep 10m
      
      - name: "Read Context Output"
        id: "ReadContextOutput"
        run: |
          content=`cat ${{ steps.OutputContext.outputs.contextDataPath }}`
          echo $content
          # the following lines are only required for multi line json
          content="${content//'%'/'%25'}"
          content="${content//$'\n'/'%0A'}"
          content="${content//$'\r'/'%0D'}"
          # end of optional handling for multi line json
          echo "::set-output name=contextData::$content"
        shell: bash
      
      - name: "Json Object"
        run: |
           echo "${{fromJson(steps.ReadContextOutput.outputs.contextData).Outputs}}"


